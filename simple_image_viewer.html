<!DOCTYPE html>
<head>
  <meta charset="UTF-8">
</head>
<body>
  <img id="image">

  <script type="text/javascript">
    (function(){
      "use strict";

      // e.g.
      // ./画像ファイル名_001.jpg
      var file_path         = "./画像ファイル名_";
      var zero_suppress_num = 3;
      var file_extension    = ".jpg";

      var image;

      function get_page_from_hash() {
        var page_string = window.document.location.hash.substring(1);
        var page        = parseInt(page_string, 10);

        if (isFinite(page) === false || page < 1) {
          page = 1;
        }

        return page;
      }

      function set_page_to_hash(page) {
        var path_hash = "#" + get_suppresses_page(page);

        history.replaceState("", "", path_hash);
        history.pushState(null, null, null); // 戻るボタンの軽い対応

        update_image();
      }

      function update_image() {
        image.src = get_file_path_from_hash();
      }

      function get_file_path_from_hash() {
        var page = get_page_from_hash();

        return file_path + get_suppresses_page(page) + file_extension;
      }

      function get_suppresses_page(page) {
        return (new Array(zero_suppress_num).fill("0").join("") + page).slice(-zero_suppress_num);
      }

      function set_onmousemove() {
        window.document.onmousemove = function(e) {
          if (e.clientX < window.screen.width / 2) {
            // カーソルが左半分にある / 左向きカーソル
            image.style.cursor = "w-resize";
          }
          else {
            // カーソルが右半分にある / 右向きカーソル
            image.style.cursor = "e-resize";
          }
        };
      }

      function set_onmousedown() {
        window.document.onmousedown = function (e){
          var page = get_page_from_hash();

          if (e.clientX < window.screen.width / 2) {
            // 左半分クリック / 前のページ
            if (page === 1) {
              return;
            }

            set_page_to_hash(page - 1);

            // 画面は一番下にスクロールした状態にする
            window.scrollTo(0, document.body.scrollHeight);
          }
          else {
            // 右半分クリック / 次のページ
            set_page_to_hash(page + 1);

            // 画面はスクロールしていない状態にする
            window.scrollTo(0, 0);
          }
        };
      }

      function initialize() {
        image = window.document.getElementById("image");
        image.style.width = "100%";

        var page = get_page_from_hash();

        set_page_to_hash(page);
      }

      initialize();

      set_onmousemove();
      set_onmousedown();
    })();
  </script>
</body>
</heml>
